<% content_for :id, 'subject-show' %>
<% type = subject_type(@subject) %>

<div class="top">
	<h1><%= "Document / #{@subject.name}" %></h1>
</div>
<%= render "resource_goback" %>

<h3><%= @subject.name %></h3>
<div class="content">
	<%= image_tag image_url "resources/documents/#{type}.png" %>
	<div class="txt">
		<%= simple_format @subject.description %>
	</div>
</div>
<div id="clear"></div>
<% @subject.documents.each do |document| %>
	<%
		#
			extension = document.extension[0..2]
			is_video = extension.in?(Document::VIDEO_EXT)
		#
	%>
	<p class="name">
		<%= image_tag image_url "resources/documents/#{document_type(document)}.png" %><br><%= document.name %>
	</p>
	<% if is_video %>
		<div class="video">
			<video controls poster="poster.png">
			  <source src="<%= document.file.url(:mp4) %>" type="video/mp4" />
			  Your browser does not support the video tag.
			</video>
		</div>
	<% end %>
	<div class="infos">
		<div class="left">
			<p>Titre</p>
			<p>Ajouté le</p>
			<p>Taille</p>
		</div>
		<div class="right">
			<p>
				<%= is_video ? File.basename(document.file.url(:mp4)) : File.basename(document.file.url(:document)) %>
			</p>
			<p><%= l document.created_at, format: :long %></p>
			<p><%= number_to_human_size document.size %></p>
		</div>
		<div class="get">
			<%= link_to 'Télécharger', download_document_path(document), target: "_blank" %>
		</div>
	</div>
<% end %>