<%= form_for @card, url: change_cards_path, remote: true do |f| %>

	<%= render 'step_header', f: f %>

	<div class="error">
		<%= render 'error_messages', object: f.object %>
	</div>
	<%= yield f %>
	<%= f.hidden_field :current_step, value: @card.current_step %>

	<div class="clear"></div>
	<% if !@card.first_step? %>
		<div class="back">
			<%= f.submit "Revenir en arrière", :name => "step[#{@card.previous_step}]" %>
		</div>
	<% end %>
	<% unless @card.last_step? %>
		<div class="next">
			<%= f.submit "Prochaine étape", :name => "step[#{@card.next_step}]", class: 'next'  %>
		</div>
		<div class="final">
			<%= f.submit "aller à la fin", :name => "step[final]", class: 'final' %>
		</div>
	<% end %>
<% end %>

<%= render 'ajax_loader' %>

<% content_for :javascript do %>
<%= javascript_include_tag "https://maps.googleapis.com/maps/api/js?key=AIzaSyBgFFWiaY1lm8ex24rqBlwLmYnVU_bwmuU&sensor=false", "data-turbolinks-track" => true %>
<%= javascript_include_tag "card_new_map.js", "data-turbolinks-track" => true %>
<% end %>