CKEDITOR.editorConfig = function(config)
{
	config.height = '400px';
	// It's magic but allow table style class
	config.allowedContent = true;
	// All that stuff to keep original source code
	config.htmlEncodeOutput = false;
	config.entities = false;
	config.protectedSource.push(/<i[^>]*><\/i>/g); // prevent i tag strip
	config.protectedSource.push(/\r|\n|\t/g); // prevent return and tab strip

	// my plugin (nkcr)
	config.extraPlugins = 'htmlbuttons';
	config.htmlbuttons = [
		{
			name: 'EMAIL',
			icon: 'mail.png',
			html: 'light.html',
			title: 'EMAIL Light'
		},
		{
			name: 'EMAILBTN',
			icon: 'mail.png',
			html: 'button.html',
			title: 'Email button'
		}
	];
	// for my mails
	config.contentsCss = '<%= asset_path("mail.css") %>';
};